package avicit.discussion_manage.checkassigntask.controller;

import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.ServletRequestUtils;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import avicit.platform6.api.syspermissionresource.permissionanalysis.core.support.LoaderConstant;
import avicit.discussion_manage.checkassigntask.dto.CheckAssignTaskDTO;
import avicit.discussion_manage.checkassigntask.service.CheckAssignTaskService;

/**
 * @classname: CheckAssignTaskController
 * @description: 定义 审查分工待办表 控制层
 * @author: AVICIT DEV
 */
@Controller
@Scope("prototype")
@RequestMapping("discussion_manage/checkassigntask/CheckAssignTaskController")
public class CheckAssignTaskController implements LoaderConstant {
	private static final Logger logger = LoggerFactory.getLogger(CheckAssignTaskController.class);

	@Autowired
	private CheckAssignTaskService service;

	/**
	 * 跳转到 CheckAssignTaskManager.jsp
	 * @param request请求
	 * @param reponse响应
	 * @return ModelAndView
	 * @throws Exception 
	 */
	@RequestMapping(value = "toCheckAssignTaskManager")
	public ModelAndView toCheckAssignTaskManager(HttpServletRequest request,HttpServletResponse reponse) throws Exception {
		ModelAndView mav = new ModelAndView();
		String userId = ServletRequestUtils.getStringParameter(request, "userId", "");
		List<CheckAssignTaskDTO> dto = service.getCheckAssignTaskDTOListByLoginUserId(userId);
		request.setAttribute("rows", dto);
		request.setAttribute("total", dto.size());
		mav.setViewName("avicit/discussion_manage/checkassigntask/CheckAssignTaskManager");
		return mav;
	}

}
