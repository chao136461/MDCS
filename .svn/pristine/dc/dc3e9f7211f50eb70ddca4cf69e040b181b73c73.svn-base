<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="avicit.discussion_manage.mdcsproposalpicture.dao.MdcsProposalPictureDao">

<resultMap id="MdcsProposalPictureDTOMap" type="avicit.discussion_manage.mdcsproposalpicture.dto.MdcsProposalPictureDTO">
		<result property="id" column="ID" jdbcType="VARCHAR" />
		<result property="strId" column="STR_ID" jdbcType="VARCHAR" />
		<result property="proposalId" column="PROPOSAL_ID" jdbcType="VARCHAR" />
		<result property="saveAddress" column="SAVE_ADDRESS" jdbcType="VARCHAR" />
		<result property="pictureInfo" column="PICTURE_INFO" jdbcType="BLOB" />
		<result property="pictureOption" column="PICTURE_OPTION" jdbcType="VARCHAR" />
		<result property="createdBy" column="CREATED_BY" jdbcType="VARCHAR" />
		<result property="creationDate" column="CREATION_DATE" jdbcType="TIMESTAMP" />
		<result property="lastUpdatedBy" column="LAST_UPDATED_BY" jdbcType="VARCHAR" />
		<result property="lastUpdateDate" column="LAST_UPDATE_DATE" jdbcType="TIMESTAMP" />
		<result property="lastUpdateIp" column="LAST_UPDATE_IP" jdbcType="VARCHAR" />
		<result property="version" column="VERSION" jdbcType="DECIMAL" />
		<result property="attribute01" column="ATTRIBUTE_01" jdbcType="VARCHAR" />
		<result property="attribute02" column="ATTRIBUTE_02" jdbcType="VARCHAR" />
		<result property="attribute03" column="ATTRIBUTE_03" jdbcType="VARCHAR" />
		<result property="attribute04" column="ATTRIBUTE_04" jdbcType="VARCHAR" />
		<result property="attribute05" column="ATTRIBUTE_05" jdbcType="VARCHAR" />
		<result property="attribute06" column="ATTRIBUTE_06" jdbcType="VARCHAR" />
		<result property="attribute07" column="ATTRIBUTE_07" jdbcType="TIMESTAMP" />
		<result property="attribute08" column="ATTRIBUTE_08" jdbcType="TIMESTAMP" />
		<result property="attribute09" column="ATTRIBUTE_09" jdbcType="DECIMAL" />
		<result property="attribute10" column="ATTRIBUTE_10" jdbcType="DECIMAL" />
</resultMap>

<!-- 新增对象 MDCS_PROPOSAL_PICTURE -->
<insert id="saveProposalPictureData" parameterType="avicit.discussion_manage.mdcsproposalpicture.dto.MdcsProposalPictureDTO">
	insert into mdcs_proposal_picture
	<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="strId != null">
				str_id,
			</if>
			<if test="proposalId != null">
				proposal_id,
			</if>
			<if test="saveAddress != null">
				save_address,
			</if>
			<if test="pictureInfo != null">
				picture_info,
			</if>
			<if test="pictureOption != null">
				picture_option,
			</if>
			<if test="createdBy != null">
				created_by,
			</if>
			<if test="creationDate != null">
				creation_date,
			</if>
			<if test="lastUpdatedBy != null">
				last_updated_by,
			</if>
			<if test="lastUpdateDate != null">
				last_update_date,
			</if>
			<if test="lastUpdateIp != null">
				last_update_ip,
			</if>
			<if test="version != null">
				version,
			</if>
			<if test="attribute01 != null">
				attribute_01,
			</if>
			<if test="attribute02 != null">
				attribute_02,
			</if>
			<if test="attribute03 != null">
				attribute_03,
			</if>
			<if test="attribute04 != null">
				attribute_04,
			</if>
			<if test="attribute05 != null">
				attribute_05,
			</if>
			<if test="attribute06 != null">
				attribute_06,
			</if>
			<if test="attribute07 != null">
				attribute_07,
			</if>
			<if test="attribute08 != null">
				attribute_08,
			</if>
			<if test="attribute09 != null">
				attribute_09,
			</if>
			<if test="attribute10 != null">
				attribute_10,
			</if>
	</trim>
	<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="strId != null">
				#{strId,jdbcType=VARCHAR},
			</if>
			<if test="proposalId != null">
				#{proposalId,jdbcType=VARCHAR},
			</if>
			<if test="saveAddress != null">
				#{saveAddress,jdbcType=VARCHAR},
			</if>
			<if test="pictureInfo != null">
				#{pictureInfo,jdbcType=BLOB},
			</if>
			<if test="pictureOption != null">
				#{pictureOption,jdbcType=VARCHAR},
			</if>
			<if test="createdBy != null">
				#{createdBy,jdbcType=VARCHAR},
			</if>
			<if test="creationDate != null">
				#{creationDate},
			</if>
			<if test="lastUpdatedBy != null">
				#{lastUpdatedBy,jdbcType=VARCHAR},
			</if>
			<if test="lastUpdateDate != null">
				#{lastUpdateDate},
			</if>
			<if test="lastUpdateIp != null">
				#{lastUpdateIp,jdbcType=VARCHAR},
			</if>
			<if test="version != null">
				#{version,jdbcType=DECIMAL},
			</if>
			<if test="attribute01 != null">
				#{attribute01,jdbcType=VARCHAR},
			</if>
			<if test="attribute02 != null">
				#{attribute02,jdbcType=VARCHAR},
			</if>
			<if test="attribute03 != null">
				#{attribute03,jdbcType=VARCHAR},
			</if>
			<if test="attribute04 != null">
				#{attribute04,jdbcType=VARCHAR},
			</if>
			<if test="attribute05 != null">
				#{attribute05,jdbcType=VARCHAR},
			</if>
			<if test="attribute06 != null">
				#{attribute06,jdbcType=VARCHAR},
			</if>
			<if test="attribute07 != null">
				#{attribute07,jdbcType=DATE},
			</if>
			<if test="attribute08 != null">
				#{attribute08,jdbcType=DATE},
			</if>
			<if test="attribute09 != null">
				#{attribute09,jdbcType=DECIMAL},
			</if>
			<if test="attribute10 != null">
				#{attribute10,jdbcType=DECIMAL},
			</if>
	</trim>
</insert>

<!-- 更新建议发表截图信息 -->
<update id="updateProposalPictureData">
	update mdcs_proposal_picture t1
		set
			t1.save_address           =#{saveAddress,  jdbcType=VARCHAR},
			t1.picture_option         =#{pictureOption,jdbcType=VARCHAR},
			t1.picture_info           =#{pictureInfo,  jdbcType=BLOB},
			t1.last_update_date       = sysdate
	where t1.proposal_id = #{proposalId,jdbcType=VARCHAR}
</update>

<!-- 建议发表截图片是否存在 -->
<select id="findProposalIsHave" parameterType="java.lang.String" resultType="java.lang.Integer">
	select count(1) from mdcs_proposal_picture t where t.proposal_id = #{proposalId,jdbcType=VARCHAR}
</select>

<!-- 根据建议id返回截图矩阵信息 -->
<select id="getPicturePosition" parameterType="java.lang.String" resultType="java.lang.String">
	select t.picture_option from mdcs_proposal_picture t where t.proposal_id = #{id}
</select>
<!-- 根据建议id返回图片 -->
<select id="queryCappFileWordByPrimaryKey" parameterType="java.lang.String" resultMap="MdcsProposalPictureDTOMap">
	select t.* from mdcs_proposal_picture t where t.proposal_id = #{id}
</select>
</mapper>